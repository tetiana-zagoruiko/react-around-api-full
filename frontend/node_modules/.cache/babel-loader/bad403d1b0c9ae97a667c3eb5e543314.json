{"ast":null,"code":"import _classCallCheck from\"/Users/tanya/Dev/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tanya/Dev/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var jwt=localStorage.getItem('jwt');var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"getCardList\",value:function getCardList(){return fetch(this._baseUrl+'/cards',{headers:this._headers}).then(function(res){return res.ok?res.json():Promise.reject('Error'+res.statusText);});}},{key:\"getUserInfo\",value:function getUserInfo(){return fetch(this._baseUrl+'/users/me',{headers:this._headers}).then(function(res){return res.ok?res.json():Promise.reject('Error'+res.statusText);});}},{key:\"addCard\",value:function addCard(_ref2){var name=_ref2.name,link=_ref2.link;return fetch(this._baseUrl+'/cards',{headers:this._headers,method:\"POST\",body:JSON.stringify({name:name,link:link})}).then(function(res){return res.ok?res.json():Promise.reject('Error'+res.statusText);});}},{key:\"removeCard\",value:function removeCard(cardID){return fetch(this._baseUrl+'/cards/'+cardID,{headers:this._headers,method:\"DELETE\"}).then(function(res){return res.ok?res.json():Promise.reject('Error'+res.statusText);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardID,like){return(like?fetch(this._baseUrl+'/cards/likes/'+cardID,{headers:this._headers,method:\"PUT\"}):fetch(this._baseUrl+'/cards/likes/'+cardID,{headers:this._headers,method:\"DELETE\"})).then(function(res){return res.ok?res.json():Promise.reject('Error'+res.statusText);});}},{key:\"setUserInfo\",value:function setUserInfo(data){return fetch(this._baseUrl+'/users/me',{headers:this._headers,method:\"PATCH\",body:JSON.stringify({name:data.name,about:data.title})}).then(function(res){return res.ok?res.json():Promise.reject('Error'+res.statusText);});}},{key:\"setUserAvatar\",value:function setUserAvatar(avatar){return fetch(this._baseUrl+'/users/me/avatar',{headers:this._headers,method:\"PATCH\",body:JSON.stringify({avatar:avatar})}).then(function(res){return res.ok?res.json():Promise.reject('Error'+res.statusText);});}}]);return Api;}();var api=new Api({baseUrl:\"https://api.tzpract.students.nomoreparties.site\",headers:{authorization:jwt,\"Content-Type\":\"application/json\"}});export default api;","map":{"version":3,"sources":["/Users/tanya/Dev/react-around-api-full/frontend/src/utils/Api.js"],"names":["jwt","localStorage","getItem","Api","baseUrl","headers","_baseUrl","_headers","fetch","then","res","ok","json","Promise","reject","statusText","name","link","method","body","JSON","stringify","cardID","like","data","about","title","avatar","api","authorization"],"mappings":"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","sourcesContent":["const jwt = localStorage.getItem('jwt');\n\nclass Api {\n    constructor({baseUrl, headers}) {\n        this._baseUrl = baseUrl;\n        this._headers = headers; \n    }\n\n    getCardList() {\n        return fetch(this._baseUrl + '/cards', {\n            headers: this._headers\n        })\n        .then(res => res.ok ? res.json() : Promise.reject('Error' + res.statusText))\n    }\n\n    getUserInfo() { \n        return fetch(this._baseUrl + '/users/me', {\n            headers: this._headers\n        })\n        .then(res => res.ok ? res.json() : Promise.reject('Error' + res.statusText))\n    }\n\n    addCard({ name, link}) {\n        return fetch(this._baseUrl + '/cards', {\n            headers: this._headers,\n            method: \"POST\",\n            body: JSON.stringify({\n                name,\n                link\n            })\n        })\n        .then(res => res.ok ? res.json() : Promise.reject('Error' + res.statusText))\n    }\n\n    removeCard(cardID) {\n        return fetch(this._baseUrl + '/cards/' + cardID, {\n            headers: this._headers,\n            method: \"DELETE\"\n        })\n        .then(res => res.ok ? res.json() : Promise.reject('Error' + res.statusText))\n\n    }\n\n    changeLikeCardStatus (cardID, like) {\n        return ((like ? fetch(this._baseUrl + '/cards/likes/' + cardID, {\n            headers: this._headers,\n            method: \"PUT\"\n        })\n        : fetch(this._baseUrl + '/cards/likes/' + cardID, {\n            headers: this._headers,\n            method: \"DELETE\"\n        }))\n            .then(res => res.ok ? res.json() : Promise.reject('Error' + res.statusText))\n        );\n    }\n\n    setUserInfo(data) {\n        return fetch(this._baseUrl + '/users/me', {\n            headers: this._headers,\n            method: \"PATCH\",\n            body: JSON.stringify({\n                name: data.name,\n                about: data.title\n            })\n        })\n        .then(res => res.ok ? res.json() : Promise.reject('Error' + res.statusText))\n    }\n\n    setUserAvatar(avatar) {\n        return fetch(this._baseUrl + '/users/me/avatar', {\n            headers: this._headers,\n            method: \"PATCH\",\n            body: JSON.stringify({\n                avatar\n            })\n        })\n            .then(res => res.ok ? res.json() : Promise.reject('Error' + res.statusText))\n    }\n\n}\n\nconst api = new Api({\n    baseUrl: \"https://api.tzpract.students.nomoreparties.site\",\n    headers: {\n        authorization: jwt,\n        \"Content-Type\": \"application/json\"\n    }\n});\n\nexport default api;"]},"metadata":{},"sourceType":"module"}